{"ast":null,"code":"import _defineProperty from\"C:/Users/daddy/Comp6210_SCP_Assignment_2-3/client/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _regeneratorRuntime from\"C:/Users/daddy/Comp6210_SCP_Assignment_2-3/client/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/daddy/Comp6210_SCP_Assignment_2-3/client/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/daddy/Comp6210_SCP_Assignment_2-3/client/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{useParams,useNavigate}from\"react-router\";import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function ScpRecord(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),records=_useState2[0],setRecords=_useState2[1];var params=useParams();var navigate=useNavigate();useEffect(function(){function fetchData(){return _fetchData.apply(this,arguments);}function _fetchData(){_fetchData=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var id,response,message,records;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:id=params.id.toString();_context.next=3;return fetch(\"http://localhost:5000/record/\".concat(params.id.toString()));case 3:response=_context.sent;if(response.ok){_context.next=8;break;}message=\"An error has occurred: \".concat(response.statusText);window.alert(message);return _context.abrupt(\"return\");case 8:_context.next=10;return response.json();case 10:records=_context.sent;if(records){_context.next=15;break;}window.alert(\"Record with id \".concat(id,\" not found\"));navigate(\"/\");return _context.abrupt(\"return\");case 15:if(response.ok){setRecords(records);console.log(records);}case 16:case\"end\":return _context.stop();}}},_callee);}));return _fetchData.apply(this,arguments);}fetchData();return;},[params.id,navigate,records.length]);var result=Object.keys(records).map(function(key){return _defineProperty({},key,records[key]);});console.log(result);// This method will delete a record\nfunction deleteRecord(_x){return _deleteRecord.apply(this,arguments);}// This following section will display the record of individual scps.\nfunction _deleteRecord(){_deleteRecord=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(id){var newRecords;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.next=2;return fetch(\"http://localhost:5000/\".concat(id),{method:\"DELETE\"});case 2:newRecords=records.filter(function(el){return el._id!==id;});setRecords(newRecords);case 4:case\"end\":return _context2.stop();}}},_callee2);}));return _deleteRecord.apply(this,arguments);}return/*#__PURE__*/_jsx(\"div\",{className:\"container mt-5 bg-light p-1 text-light\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container mt-3 bg-dark\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"\",children:[/*#__PURE__*/_jsx(\"img\",{src:\"images/\".concat(records.image),className:\"card-img\",alt:\"scp-pictures\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Item #: \",records.item]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"SCP Name: \",records.name]}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"SCP Objectclass: \",records.objectclass]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Description:\"}),/*#__PURE__*/_jsx(\"p\",{children:records.description}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"h4\",{children:\"Containment:\"}),/*#__PURE__*/_jsx(\"p\",{children:records.containment}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(Link,{className:\"btn btn-link\",to:\"/edit/\".concat(records._id),children:\"Edit\"}),\" \",\"|\",/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-link\",onClick:function onClick(){deleteRecord(records._id);navigate(\"/recordList\");},children:\"Delete\"})]})]})})})});}","map":{"version":3,"names":["React","useEffect","useState","useParams","useNavigate","Link","ScpRecord","records","setRecords","params","navigate","fetchData","id","toString","fetch","response","ok","message","statusText","window","alert","json","console","log","length","result","Object","keys","map","key","deleteRecord","method","newRecords","filter","el","_id","image","item","name","objectclass","description","containment"],"sources":["C:/Users/daddy/Comp6210_SCP_Assignment_2-3/client/src/components/scp.js"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { useParams, useNavigate } from \"react-router\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nexport default function ScpRecord() {\r\n  const [records, setRecords] = useState([]);\r\n\r\n  const params = useParams();\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    async function fetchData() {\r\n      const id = params.id.toString();\r\n      const response = await fetch(\r\n        `http://localhost:5000/record/${params.id.toString()}`\r\n      );\r\n\r\n      if (!response.ok) {\r\n        const message = `An error has occurred: ${response.statusText}`;\r\n        window.alert(message);\r\n        return;\r\n      }\r\n\r\n      const records = await response.json();\r\n      if (!records) {\r\n        window.alert(`Record with id ${id} not found`);\r\n        navigate(\"/\");\r\n        return;\r\n      }\r\n\r\n      if (response.ok) {\r\n        setRecords(records);\r\n        console.log(records);\r\n      }\r\n    }\r\n\r\n    fetchData();\r\n\r\n    return;\r\n  }, [params.id, navigate, records.length]);\r\n\r\n  const result = Object.keys(records).map((key) => {\r\n    return { [key]: records[key] };\r\n  });\r\n  console.log(result);\r\n\r\n  // This method will delete a record\r\n  async function deleteRecord(id) {\r\n    await fetch(`http://localhost:5000/${id}`, {\r\n      method: \"DELETE\",\r\n    });\r\n\r\n    const newRecords = records.filter((el) => el._id !== id);\r\n    setRecords(newRecords);\r\n  }\r\n\r\n  // This following section will display the record of individual scps.\r\n  return (\r\n    <div className=\"container mt-5 bg-light p-1 text-light\">\r\n      <div className=\"container\">\r\n        <div className=\"container mt-3 bg-dark\">\r\n          <div className=\"\">\r\n            <img\r\n              src={`images/${records.image}`}\r\n              className=\"card-img\"\r\n              alt=\"scp-pictures\"\r\n            />\r\n            <h3>Item #: {records.item}</h3>\r\n            <h3>SCP Name: {records.name}</h3>\r\n            <h3>SCP Objectclass: {records.objectclass}</h3>\r\n            <hr />\r\n            <h4>Description:</h4>\r\n            <p>{records.description}</p>\r\n            <hr />\r\n            <h4>Containment:</h4>\r\n            <p>{records.containment}</p>\r\n            <p>\r\n              <Link className=\"btn btn-link\" to={`/edit/${records._id}`}>\r\n                Edit\r\n              </Link>{\" \"}\r\n              |\r\n              <button\r\n                className=\"btn btn-link\"\r\n                onClick={() => {\r\n                  deleteRecord(records._id);\r\n                  navigate(\"/recordList\");\r\n                }}>\r\n                Delete\r\n              </button>\r\n            </p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}